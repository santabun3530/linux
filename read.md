ржмрзБржЭрждрзЗ ржкрж╛рж░ржЫрж┐ тАУ рждрзБржорж┐ ржЖрж╕рж▓рзЗ ржкрзБрж░рзЛ ржЫржмрж┐ржЯрж╛ ржПржХрж╕рж╛ржерзЗ connect ржХрж░рждрзЗ ржЪрж╛ржЗржЫрзЛ тАФ ржЕрж░рзНржерж╛рзО **userтАУgroupтАУpermission** ржХрж┐ржнрж╛ржмрзЗ ржПржХрзЗ ржЕржкрж░рзЗрж░ рж╕рж╛ржерзЗ рж▓рж┐ржЩрзНржХржб ржерж╛ржХрзЗред
ржЪрж▓рзЛ step by step ржбржЯ ржХрж╛ржирзЗржХрзНржЯ ржХрж░рж┐ ЁЯФЧ

---

## 1я╕ПтГг User рждрзИрж░рж┐ ржХрж░рж▓рзЗ ржХрж┐ рж╣рзЯ?

ЁЯСЙ рждрзБржорж┐ ржпржЦржи `sony` ржирж╛ржорзЗ user ржмрж╛ржирж╛рж▓рзЗ:

* ржПржХржЯрж╛ **user account** рждрзИрж░рж┐ рж╣рж▓рзЛ тЖТ `sony (UID=1001)`
* рж╕рж╛ржерзЗ рж╕рж╛ржерзЗ ржПржХржЯрж╛ **primary group** рждрзИрж░рж┐ рж╣рж▓рзЛ тЖТ `sony (GID=1001)`
* ржорж╛ржирзЗ `sony` user by default `sony` group-ржПрж░ memberред
* ржПржЗ primary group рж╢рзБржзрзБ user-ржПрж░ default ownership set ржХрж░рждрзЗ ржХрж╛ржЬрзЗ рж▓рж╛ржЧрзЗ (ржпрзЗржоржи ржирждрзБржи ржлрж╛ржЗрж▓ ржмрж╛ржирж╛рж▓рзЗ, рж╕рзЗржЗ ржлрж╛ржЗрж▓рзЗрж░ group рж╣ржмрзЗ `sony`)ред

ЁЯФ╣ ржПржЬржирзНржп рждрзБржорж┐ ржжрзЗржЦржЫрзЛ:

```
sony:x:1001:
```

---

## 2я╕ПтГг Secondary groups

Primary group рж╢рзБржзрзБ default ownership-ржПрж░ ржЬржирзНржпред ржХрж┐ржирзНрждрзБ **special ржХрж╛ржЬ ржХрж░рж╛рж░ ржЬржирзНржп user ржХрзЗ secondary group ржП ржврзБржХрж╛рждрзЗ рж╣рзЯ**ред

ржЙржжрж╛рж╣рж░ржг:

* рждрзБржорж┐ `sony` ржХрзЗ `sudo` group ржП ржжрж┐рж▓рзЗ тЖТ рж╕рзЗ ржПржЦржи admin permission ржкрзЗрждрзЗ ржкрж╛рж░рзЗред
* рждрзБржорж┐ `sony` ржХрзЗ `docker` group ржП ржжрж┐рж▓рзЗ тЖТ рж╕рзЗ ржПржЦржи docker ржЪрж╛рж▓рж╛рждрзЗ ржкрж╛рж░ржмрзЗ `sudo` ржЫрж╛рзЬрж╛ред

ЁЯФ╣ ржПржЬржирзНржп `/etc/group` ржП ржПржнрж╛ржмрзЗ ржжрзЗржЦрж╛ржЪрзНржЫрзЗ:

```
sudo:x:27:sony,vagrant
docker:x:999:vagrant,sony
```

ржорж╛ржирзЗ `sony` тЖТ **secondary member** of `sudo` ржЖрж░ `docker`ред

---

## 3я╕ПтГг Root group vs Sudo group

* **root user (UID=0, GID=0)** тЖТ Linux-ржПрж░ superuserред рж╕рзЗ рж╕ржмржХрж┐ржЫрзБ ржХрж░рждрзЗ ржкрж╛рж░рзЗред рждрж╛рж░ primary group рж╣рж▓рзЛ `root`ред
* **sudo group** тЖТ рж╕рж╛ржзрж╛рж░ржг user ржжрзЗрж░ржХрзЗ ржЕрж╕рзНржерж╛рзЯрзАржнрж╛ржмрзЗ root permission ржжрзЗржУрзЯрж╛рж░ shortcutред

  * `sony` sudo group ржП ржерж╛ржХрж▓рзЗ тЖТ `sony` root ржирж╛, ржХрж┐ржирзНрждрзБ `sudo command` ржжрж┐рж▓рзЗ root-ржПрж░ ржорждрзЛ ржХрж╛ржЬ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗред
  * root ржЖрж▓рж╛ржжрж╛ user, sudo group рж╣рж▓рзЛ ржЕржирзНржп user-ржжрзЗрж░ржХрзЗ root ржПрж░ privilege ржжрзЗржУрзЯрж╛ред

ЁЯСЙ ржПржЬржирзНржп root ржЖрж▓рж╛ржжрж╛ ржерж╛ржХрзЗ, ржЖрж░ sudo ржЧрзНрж░рзБржк root ржПрж░ shortcut accessред

---

## 4я╕ПтГг Software-specific groups

рж╕ржм software group ржмрж╛ржирж╛рзЯ ржирж╛ред ржХрж┐ржЫрзБ software ржХрзЗржи group ржмрж╛ржирж╛рзЯ?
ржХрж╛рж░ржг рждрж╛рж░рж╛ **system resources** ржП access control ржХрж░рждрзЗ ржЪрж╛рзЯред

* **Docker** тЖТ root ржЫрж╛рзЬрж╛ржЗ socket access ржжрж░ржХрж╛рж░ред рждрж╛ржЗ `docker` group ржмрж╛ржирж╛рзЯред
* **KVM / libvirt** тЖТ virtualization ржПрж░ ржЬржирзНржп `kvm`, `libvirt` group ржмрж╛ржирж╛рзЯред
* **Systemd services** (`systemd-journal`, `systemd-resolve`) тЖТ ржирж┐ржЬрзЗржжрзЗрж░ process ржЧрзБрж▓рзЛржХрзЗ ржЖрж▓рж╛ржжрж╛ group ржП рж░рж╛ржЦрзЗ ржпрж╛рждрзЗ limited access control рж╣рзЯред

ржЕржирзНржп software ржпрзЗржЧрзБрж▓рзЛрж░ ржЖрж▓рж╛ржжрж╛ permission ржжрж░ржХрж╛рж░ ржирзЗржЗ (ржпрзЗржоржи `vim`, `curl`) рждрж╛рж░рж╛ group ржмрж╛ржирж╛рзЯ ржирж╛ред

---

## 5я╕ПтГг ржПржЦржи рж╕ржм ржбржЯ connect ржХрж░рж▓рзЗ ржЫржмрж┐ржЯрж╛ ржПрж░ржХржо ЁЯФЧ

* **User add ржХрж░рж▓рзЗ** тЖТ ржПржХржЗ ржирж╛ржорзЗ **primary group** add рж╣рзЯред
* **User ржХрзЗ secondary group ржП ржжрж┐рж▓рзЗ** тЖТ user extra permission ржкрж╛рзЯ (ржпрзЗржоржи `sudo`, `docker`)ред
* **Root** тЖТ рж╕ржмржХрж┐ржЫрзБрж░ ржорж╛рж▓рж┐ржХ (superuser)ред
* **Sudo group** тЖТ root ржПрж░ ржХрж╛ржЬ ржХрж░рж╛рж░ shortcut ржжрзЗрзЯ normal user ржХрзЗред
* **System groups** тЖТ system services ржПржмржВ ржХрж┐ржЫрзБ рж╕ржлржЯржУрзЯрзНржпрж╛рж░ ржирж┐ржЬрзЗржжрзЗрж░ ржХрж╛ржЬрзЗрж░ ржЬржирзНржп group ржмрж╛ржирж╛рзЯред
* **рж╕ржм group = рж╢рзБржзрзБржЗ permission management ржПрж░ container**ред

---

## ЁЯФ╣ Practical mapping from рждрзЛржорж╛рж░ `/etc/group`

* `sony:x:1001:` тЖТ **Primary group** (default for sony)
* `sudo:x:27:sony,vagrant` тЖТ **Secondary group** тЖТ admin power
* `docker:x:999:vagrant,sony` тЖТ **Secondary group** тЖТ docker ржЪрж╛рж▓рж╛рждрзЗ ржжрзЗрзЯ
* `systemd-journal`, `syslog`, `messagebus` тЖТ **System groups** тЖТ services ржПрж░ ржЬржирзНржп
* `root:x:0:` тЖТ **Root group** (UID=0, GID=0, рж╕ржмржХрж┐ржЫрзБ ржХрж░рждрзЗ ржкрж╛рж░рзЗ)

---

ЁЯСЙ ржПржЦржи ржПржХржЯрж╛ example scenario:

* `sony` ржПржХржЯрж╛ ржлрж╛ржЗрж▓ ржмрж╛ржирж╛рж▓рзЗ тЖТ ржлрж╛ржЗрж▓рзЗрж░ owner рж╣ржмрзЗ `(sony, sony)`
* `sony` ржЪрж╛ржЗрж▓рзЗ system update ржХрж░рждрзЗ тЖТ `sudo apt update` (ржХрж╛рж░ржг sudo group ржП ржЖржЫрзЗ)
* `sony` ржЪрж╛ржЗрж▓рзЗ docker ржЪрж╛рж▓рж╛рждрзЗ тЖТ `docker run тАж` (ржХрж╛рж░ржг docker group ржП ржЖржЫрзЗ)

---

ржПржЦржи ржмрж▓рзЛ тАФ рждрзБржорж┐ ржХрж┐ ржЪрж╛ржЗржЫрзЛ ржЖржорж┐ diagram style (ASCII ржмрж╛ table ржЖржХрж╛рж░рзЗ) ржПржХржЯрж╛ full map ржПржБржХрзЗ ржжрж┐ржЗ userтАУgroupтАУpermission relationship?
